module Sudoku {
    export class fixedGenerator implements baseGenerator {
        private solver: fixedSolver;
        constructor() {
            this.solver = new fixedSolver(() => this.EASY.concat(this.MEDIUM).concat(this.HARD).concat(this.EXTREME));
        }
        genrate(board: board, level: gameLevel): boolean {        
            var succeed = false;
            var game: string;
            var cellValue: number;
            var levelStr = gameLevel[level];
            if (this[levelStr] != null && this[levelStr].length > 0) {
                var randomIndex = Math.floor(Math.random() * this[levelStr].length);
                game = this[levelStr][randomIndex]["sud"];
                //TODO make some shuffle //if then you need to refactore the fixed solver
                if (game.length == 81) {
                    for (var r = 0; r < 9; r++) {
                        for (var c = 0; c < 9; c++) {
                            cellValue = parseInt(game.charAt((r * 9) + c));
                            if (this.IsNumeric(cellValue) && cellValue >= 0) {
                                board.setSystemCell(r, c, cellValue);
                            }
                            else
                                return false;
                        }
                    }
                    succeed = true;
                }
            }

            return succeed;
        }
        private IsNumeric(strChar) {  //  check for valid numeric strings
            var strValidChars = "0123456789";
            var blnResult = true;
            if (strChar.length === 0) {
                return false;
            }
            if (strValidChars.indexOf(strChar) == -1) {
                blnResult = false;
            }
            return blnResult;
        }
        public getSolver(): baseSolver {
            return this.solver;
        }

        private MEDIUM = [];
        private HARD = [];
        private EXTREME = [];
        //http://www.sudokuwiki.org/

        //TODO not all of them easy only for Test Purpose
        private EASY = [
            { "sud": "000105000140000670080002400063070010900000003010090520007200080026000035000409000", "sol": "672145398145983672389762451263574819958621743714398526597236184426817935831459267" },
            { "sud": "000004028406000005100030600000301000087000140000709000002010003900000507670400000", "sol": "735164928426978315198532674249381756387256149561749832852617493914823567673495281" },
            { "sud": "400010000000309040070005009000060021004070600190050000900400070030608000000030006", "sol": "459716382612389745873245169387964521524173698196852437965421873731698254248537916" },
            { "sud": "309000400200709000087000000750060230600904008028050041000000590000106007006000104", "sol": "369218475215749863487635912754861239631924758928357641173482596542196387896573124" },
            { "sud": "000704005020010070000080002090006250600070008053200010400090000030060090200407000", "sol": "981724365324615879765983142197836254642571938853249716476398521538162497219457683" },
            { "sud": "002090300805000000100000000090060040000000058000000001070000200300500000000100000", "sol": "742895316835617429169234587598361742613742958427958631971483265386529174254176893" },
            { "sud": "000000000001900500560310090100600028004000700270004003040068035002005900000000000", "sol": "928547316431986572567312894195673428384251769276894153749168235612435987853729641" },
            { "sud": "300000000970010000600583000200000900500621003008000005000435002000090056000000001", "sol": "381976524975214638642583179264358917597621483138749265816435792423197856759862341" },
            { "sud": "000921003009000060000000500080403006007000800500700040003000000020000700800195000", "sol": "765921483319548267248367519182453976437619825596782341653274198921836754874195632" },
            { "sud": "093004560060003140004608309981345000347286951652070483406002890000400010029800034", "sol": "293714568768593142514628379981345726347286951652971483476132895835469217129857634" },
            { "sud": "123000587005817239987000164051008473390750618708100925076000891530081746810070352", "sol": "123496587465817239987532164651928473392754618748163925276345891539281746814679352" },
            { "sud": "036210840800045631014863009287030456693584000145672398408396000350028064060450083", "sol": "936217845872945631514863729287139456693584172145672398428396517351728964769451283" },
            { "sud": "004630500605401003370059640938060154457198362216345987043506019060903405509014036", "sol": "194632578685471293372859641938267154457198362216345987843526719761983425529714836" },
            { "sud": "645010893738459621219638745597060184481975000326841579902080010803190000164020908", "sol": "645712893738459621219638745597263184481975362326841579952386417873194256164527938" },
            { "sud": "050030602642895317037020800023504700406000520571962483214000900760109234300240170", "sol": "859731642642895317137426895923584761486317529571962483214673958768159234395248176" },
            { "sud": "008003102002810306314260980923648700476351298185900634047030820209080500801700460", "sol": "768593142592814376314267985923648751476351298185972634647135829239486517851729463" },
            { "sud": "804537000023614085605982034000105870500708306080203450200859003050371208008426507", "sol": "894537612723614985615982734362145879541798326987263451276859143459371268138426597" },
            { "sud": "506094003000086925892513647738629050154378296629451738987145362000960000000830009", "sol": "576294813341786925892513647738629451154378296629451738987145362213967584465832179" },
            { "sud": "093824560085600002206075008321769845000258300578040296850016723007082650002507180", "sol": "793824561485631972216975438321769845964258317578143296859416723147382659632597184" },
            { "sud": "300052000250300010004607523093200805570000030408035060005408300030506084840023056", "sol": "386152497257349618914687523693271845571864239428935761165498372732516984849723156" },
            { "sud": "290000830000020970000109402845761293600000547009045008903407000060030709050000384", "sol": "296574831418623975537189462845761293621398547379245618983457126164832759752916384" },
            { "sud": "023401967006702100170690020749120006001960700000047091030076010007014800010209670", "sol": "823451967496782153175693428749125386351968742682347591934876215267514839518239674" },
            { "sud": "587412693206037800100008200002001748050724900714800500005240109001085400420170305", "sol": "587412693246937851139568274962351748853724916714896532675243189391685427428179365" },
            { "sud": "923407015876050924500200030769020140432000059185004260098042071207030486000708092", "sol": "923487615876153924541296837769325148432861759185974263398642571217539486654718392" },
            { "sud": "986721345304956007007030960073065009690017003100390276000679030069143700731582694", "sol": "986721345314956827527834961873265419692417583145398276458679132269143758731582694" },
            { "sud": "024090008800402900719000240075804300240900587038507604082000059007209003490050000", "sol": "624795138853412976719683245975864321246931587138527694382176459567249813491358762" },
            { "sud": "760005804530400060849006050307060205256710003904050607423600570695007000178500026", "sol": "761925834532478169849136752317864295256719483984352617423691578695287341178543926" },
            { "sud": "100480003070156492400370186729564318504031009010290045007040901040913067901020004", "sol": "196482573378156492452379186729564318584731629613298745267845931845913267931627854" },
            { "sud": "100390004029000300000502800016000570900000006042000080000139000695000731231756008", "sol": "168397254529481367374562819816943572953278146742615983487139625695824731231756498" },
            { "sud": "592178346063245089840936050006852904904617508085394600059481060400063890608029400", "sol": "592178346163245789847936152716852934934617528285394671359481267421763895678529413" },
            { "sud": "200008001194762835000010042470000020009200100020000059658927010913654287742183596", "sol": "235498761194762835867315942471539628589246173326871459658927314913654287742183596" },
            { "sud": "617304800485010307923857641359040078164078530278030064592761483841003706736480010", "sol": "617394825485612397923857641359146278164278539278539164592761483841923756736485912" },
            { "sud": "400052008708300002900080040596127384187030256004568719840000005000003801000895400", "sol": "463952178758314962912786543596127384187439256324568719849271635275643891631895427" },
            { "sud": "004302985080100006000800041900600500036950070057008693590000007000509060602700859", "sol": "714362985385194726269875341928637514436951278157428693591286437873549162642713859" },
            { "sud": "092001750500200008000030200075004960200060075069700030008090020700003089903800040", "sol": "392481756541276398687935214875324961234169875169758432418697523726543189953812647" },
            { "sud": "400052008708300002900080040596127384187030256004568719840000005000003801000895400", "sol": "463952178758314962912786543596127384187439256324568719849271635275643891631895427" },
            { "sud": "620050030000920150015004000003000600180000075062000300001249700296785413040060592", "sol": "629157834438926157715834926573412689184693275962578341351249768296785413847361592" },
            { "sud": "000602400002403600000080021070000840309040207045000030500060000003159780008204500", "sol": "731692458852413679694785321276931845389546217145827936527368194463159782918274563" },
            { "sud": "010600000000103207400950006745869000829000465100524978600090004201406000004000680", "sol": "912687543568143297473952816745869321829371465136524978657298134281436759394715682" },
            { "sud": "080000070001800009270961005100082700007413500008790003300248007800000200742000060", "sol": "983524176561837429274961835135682794697413582428795613316248957859376241742159368" },
            { "sud": "900008503080020097006000004300406002060080359800203001700860205650070018008500006", "sol": "924718563583624197176935824315496782462187359897253641741869235659372418238541976" },
            { "sud": "005907600090000080000830490010580000009000300000096010452018000030000040007400200", "sol": "385947621794261583621835497216583974879124356543796812452318769938672145167459238" },
            { "sud": "215800060400625000006300000950080040002947000040530092000053406524768931060400058", "sol": "215879364438625179796314285953281647682947513147536892879153426524768931361492758" },
            { "sud": "520800367709630050600725009006080700800056003002070600100542906090068500065007040", "sol": "521894367789631254643725189436189725817256493952473618178542936294368571365917842" },
            { "sud": "006019500907068043080000000804190000000645800000802904000006420540001607002984300", "sol": "236419578957268143481537296824193765793645812165872934318756429549321687672984351" },
            { "sud": "150432069904186005003070004002000040000090002030020500000000400346750008810240056", "sol": "158432769974186235263975184692517843785394612431628597529863471346751928817249356" },
            { "sud": "092400018846312597100900002000601004610040080704809000200003006001064820460000070", "sol": "392475618846312597175986342928651734613247985754839261287193456531764829469528173" },
            { "sud": "002006500400000023000002406978060312613729845245010679800900200320600054004200008", "sol": "782346591456198723139572486978465312613729845245813679861954237327681954594237168" },
            { "sud": "300000709019070005076090030090086301108000600600410050080060203700030086963000007", "sol": "352841769419673825876295134295786341148359672637412958584167293721934586963528417" },
            { "sud": "060000509002400600905000070009010086000206905056080700090000162008007493604000857", "sol": "461738529372459618985621374749315286813276945256984731597843162128567493634192857" },
            { "sud": "900875001000109000001302009190023058208057103530081060400706800000204000700518004", "sol": "946875231372149586851362479194623758268957143537481962419736825685294317723518694" },
            { "sud": "008907050070040010060501007630000900009000800007400035700603020040070060006104700", "sol": "418967253572348619963521487634815972159732846287496135791683524845279361326154798" },
            { "sud": "000000605000300090080004001040020970000000000031080060900600020010007000504000000", "sol": "123978645456312897789564231645123978897456312231789564978645123312897456564231789" },
            { "sud": "100007090030020008009600500005300900010080002600004000300000010041000007007000300", "sol": "162857493534129678789643521475312986913586742628794135356478219241935867897261354" },
            { "sud": "800000000003600000070090200050007000000045700000100030001000068008500010090000400", "sol": "812753649943682175675491283154237896369845721287169534521974368438526917796318452" }];
     

   /*online solveer ..later onlline grading
  javascript:if(!window.jQuery || confirm('Overwrite\x20current\x20version?\x20v' + jQuery.fn.jquery))(function (d, s) { s = d.createElement('script'); s.src = 'http://code.jquery.com/jquery.js'; (d.head || d.documentElement).appendChild(s) })(document);

    var arr = ["000105000140000670080002400063070010900000003010090520007200080026000035000409000",
        "000004028406000005100030600000301000087000140000709000002010003900000507670400000",
        "400010000000309040070005009000060021004070600190050000900400070030608000000030006",
        "309000400200709000087000000750060230600904008028050041000000590000106007006000104"
    ];
    var solutions = [];
    for (var i = 0; i < arr.length; i++) {
        $.ajax({
            url: "http://www.sudokuwiki.org/S/WebSudoku.dll?solutions&0," + arr[i],
            async: false
        }).done(function (data) {
                var data = $(data).find("textarea").text().split("\n");
                if (data.length == 3) {
                    solutions[solutions.length] = { "sud": data[0].replace(/\./g, "0"), "sol": data[1] };
                    console.log(JSON.stringify({ "sud": data[0].replace(/\./g, "0"), "sol": data[1] }));
                }

            });

        console.log(JSON.stringify(solutions));

*/
    }

} 